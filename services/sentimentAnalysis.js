// services/sentimentAnalysis.js
const Sentiment = require('sentiment');
const nlp = require('compromise');

const sentiment = new Sentiment();

// Palabras personalizadas en español para mejorar el análisis
const spanishWords = {
  'feliz': 3,
  'alegre': 3,
  'contento': 2,
  'emocionado': 3,
  'genial': 3,
  'fantástico': 4,
  'increíble': 4,
  'maravilloso': 4,
  'perfecto': 3,
  'excelente': 4,
  'bien': 2,
  'bueno': 2,
  'positivo': 2,
  'optimista': 3,
  'motivado': 3,
  'energético': 3,
  'relajado': 2,
  'tranquilo': 2,
  'sereno': 2,
  'calmado': 2,
  'triste': -3,
  'deprimido': -4,
  'melancólico': -2,
  'desanimado': -3,
  'aburrido': -2,
  'cansado': -2,
  'agotado': -3,
  'estresado': -3,
  'ansioso': -3,
  'preocupado': -2,
  'nervioso': -2,
  'frustrado': -3,
  'enojado': -3,
  'molesto': -2,
  'irritado': -2,
  'furioso': -4,
  'terrible': -4,
  'horrible': -4,
  'malo': -2,
  'negativo': -2,
  'pesimista': -2,
  'desmotivado': -3,
  'solo': -2,
  'vacío': -3,
  'perdido': -2,
  'confundido': -2,
  'abrumado': -3,
  'desesperado': -4,
  'hopeless': -4,
  'inútil': -3,
  'fracaso': -3,
  'dolor': -3,
  'sufrimiento': -4,
  'lágrimas': -2,
  'llorar': -2,
  'sonreír': 2,
  'reír': 3,
  'disfrutar': 3,
  'amar': 4,
  'odiar': -4,
  'querer': 2,
  'esperar': 2,
  'soñar': 2,
  'lograr': 3,
  'conseguir': 2,
  'fallar': -3,
  'perder': -2,
  'ganar': 3,
  'éxito': 4,
  'victoria': 4,
  'derrota': -3,
  'problema': -2,
  'dificultad': -2,
  'obstáculo': -2,
  'desafío': 1,
  'oportunidad': 3,
  'posibilidad': 2,
  'esperanza': 3,
  'fe': 2,
  'confianza': 3,
  'seguridad': 2,
  'miedo': -3,
  'terror': -4,
  'pánico': -4,
  'calma': 2,
  'paz': 3,
  'armonía': 3,
  'equilibrio': 2,
  'caos': -3,
  'desorden': -2,
  'control': 2,
  'libertad': 3,
  'prisión': -3,
  'escape': 1,
  'refugio': 2,
  'hogar': 2,
  'familia': 2,
  'amigos': 2,
  'soledad': -3,
  'compañía': 2,
  'apoyo': 3,
  'ayuda': 2,
  'abandono': -4,
  'rechazo': -3,
  'aceptación': 3,
  'comprensión': 2,
  'confusión': -2,
  'claridad': 2,
  'certeza': 2,
  'duda': -2,
  'seguro': 2,
  'inseguro': -2,
  'fuerte': 2,
  'débil': -2,
  'poderoso': 3,
  'impotente': -3,
  'capaz': 2,
  'incapaz': -3,
  'útil': 2,
  'valioso': 3,
  'importante': 2,
  'insignificante': -3,
  'especial': 3,
  'único': 2,
  'común': 0,
  'extraordinario': 4,
  'normal': 0,
  'raro': -1,
  'extraño': -1,
  'familiar': 1,
  'conocido': 1,
  'desconocido': -1,
  'nuevo': 1,
  'viejo': -1,
  'fresco': 2,
  'renovado': 2,
  'cansancio': -2,
  'energía': 3,
  'vitalidad': 3,
  'vida': 2,
  'muerte': -4,
  'nacimiento': 3,
  'crecimiento': 2,
  'progreso': 3,
  'retroceso': -2,
  'avance': 2,
  'mejora': 3,
  'empeoramiento': -3,
  'recuperación': 3,
  'sanación': 3,
  'herida': -2,
  'curación': 3,
  'enfermedad': -3,
  'salud': 3,
  'bienestar': 3,
  'malestar': -2,
  'comodidad': 2,
  'incomodidad': -2,
  'placer': 3,
  'displacer': -2,
  'satisfacción': 3,
  'insatisfacción': -3,
  'gratitud': 4,
  'agradecimiento': 3,
  'ingratitud': -2,
  'reconocimiento': 2,
  'ignorancia': -2,
  'sabiduría': 3,
  'conocimiento': 2,
  'aprendizaje': 2,
  'enseñanza': 2,
  'educación': 2,
  'ignorar': -2,
  'atención': 1,
  'concentración': 1,
  'distracción': -1,
  'enfoque': 2,
  'dispersión': -2,
  'unión': 2,
  'separación': -2,
  'conexión': 2,
  'desconexión': -2,
  'comunicación': 2,
  'silencio': 0,
  'ruido': -1,
  'música': 2,
  'armonía': 3,
  'discordia': -3,
  'conflicto': -3,
  'guerra': -4,
  'paz': 3,
  'violencia': -4,
  'gentileza': 3,
  'crueldad': -4,
  'bondad': 4,
  'maldad': -4,
  'generosidad': 4,
  'egoísmo': -3,
  'altruismo': 3,
  'compasión': 4,
  'empatía': 3,
  'indiferencia': -2,
  'cuidado': 3,
  'negligencia': -3,
  'responsabilidad': 2,
  'irresponsabilidad': -3,
  'compromiso': 2,
  'abandono': -3,
  'lealtad': 3,
  'traición': -4,
  'honestidad': 3,
  'mentira': -3,
  'verdad': 3,
  'falsedad': -3,
  'sinceridad': 3,
  'hipocresía': -3,
  'autenticidad': 3,
  'falsificación': -3,
  'originalidad': 2,
  'copia': -1,
  'creatividad': 3,
  'innovación': 3,
  'tradición': 1,
  'cambio': 1,
  'estabilidad': 1,
  'inestabilidad': -2,
  'constancia': 2,
  'inconstancia': -2,
  'persistencia': 2,
  'rendición': -2,
  'resistencia': 2,
  'debilidad': -2,
  'fortaleza': 3,
  'coraje': 4,
  'cobardía': -3,
  'valentía': 4,
  'miedo': -3,
  'bravura': 3,
  'timidez': -1,
  'confianza': 3,
  'desconfianza': -2,
  'fe': 2,
  'escepticismo': -1,
  'creencia': 1,
  'duda': -2,
  'certidumbre': 2,
  'incertidumbre': -2,
  'claridad': 2,
  'confusión': -2,
  'orden': 2,
  'desorden': -2,
  'organización': 2,
  'caos': -3,
  'estructura': 1,
  'destrucción': -4,
  'construcción': 2,
  'creación': 3,
  'aniquilación': -4,
  'existencia': 1,
  'inexistencia': -2,
  'presencia': 1,
  'ausencia': -1,
  'llegada': 1,
  'partida': -1,
  'encuentro': 2,
  'despedida': -2,
  'bienvenida': 3,
  'rechazo': -3,
  'aceptación': 3,
  'aprobación': 3,
  'desaprobación': -3,
  'elogio': 3,
  'crítica': -2,
  'alabanza': 3,
  'censura': -3,
  'reconocimiento': 2,
  'ignorancia': -2,
  'atención': 1,
  'negligencia': -3,
  'cuidado': 3,
  'descuido': -2,
  'precaución': 1,
  'imprudencia': -2,
  'prudencia': 2,
  'temeridad': -2,
  'sabiduría': 3,
  'necedad': -2,
  'inteligencia': 3,
  'estupidez': -3,
  'brillantez': 4,
  'mediocridad': -1,
  'excelencia': 4,
  'inferioridad': -3,
  'superioridad': 2,
  'igualdad': 1,
  'desigualdad': -2,
  'justicia': 3,
  'injusticia': -4,
  'equidad': 3,
  'parcialidad': -2,
  'imparcialidad': 2,
  'favoritismo': -2,
  'discriminación': -4,
  'inclusión': 3,
  'exclusión': -3,
  'pertenencia': 2,
  'alienación': -3,
  'integración': 2,
  'segregación': -3,
  'unidad': 3,
  'división': -2,
  'cooperación': 3,
  'competencia': 0,
  'colaboración': 3,
  'rivalidad': -1,
  'alianza': 2,
  'enemistad': -3,
  'amistad': 4,
  'hostilidad': -4,
  'cordialidad': 3,
  'frialdad': -2,
  'calidez': 3,
  'frivolidad': -1,
  'seriedad': 1,
  'humor': 3,
  'tristeza': -3,
  'alegría': 4,
  'melancolía': -2,
  'euforia': 3,
  'depresión': -4,
  'ánimo': 2,
  'desánimo': -3,
  'entusiasmo': 4,
  'apatía': -3,
  'pasión': 4,
  'indiferencia': -2,
  'interés': 2,
  'desinterés': -2,
  'curiosidad': 2,
  'aburrimiento': -2,
  'fascinación': 3,
  'hastío': -3,
  'admiración': 3,
  'desprecio': -4,
  'respeto': 3,
  'irrespeto': -3,
  'veneración': 3,
  'profanación': -4,
  'honor': 3,
  'deshonor': -4,
  'dignidad': 3,
  'indignidad': -3,
  'orgullo': 2,
  'humildad': 2,
  'arrogancia': -3,
  'modestia': 2,
  'vanidad': -2,
  'sencillez': 2,
  'ostentación': -2,
  'simplicidad': 2,
  'complejidad': -1,
  'facilidad': 2,
  'dificultad': -2,
  'sencillo': 1,
  'complicado': -2,
  'fácil': 2,
  'difícil': -2,
  'posible': 2,
  'imposible': -3,
  'probable': 1,
  'improbable': -1,
  'seguro': 2,
  'inseguro': -2,
  'cierto': 2,
  'incierto': -2,
  'real': 1,
  'irreal': -1,
  'verdadero': 2,
  'falso': -2,
  'auténtico': 2,
  'artificial': -1,
  'natural': 2,
  'antinatural': -2,
  'espontáneo': 2,
  'forzado': -2,
  'libre': 3,
  'cautivo': -3,
  'independiente': 2,
  'dependiente': -1,
  'autónomo': 2,
  'subordinado': -1,
  'líder': 2,
  'seguidor': 0,
  'jefe': 1,
  'empleado': 0,
  'maestro': 2,
  'estudiante': 1,
  'profesor': 2,
  'alumno': 1,
  'doctor': 2,
  'paciente': -1,
  'sanador': 3,
  'enfermo': -3,
  'salvador': 4,
  'víctima': -3,
  'héroe': 4,
  'villano': -4,
  'ángel': 4,
  'demonio': -4,
  'santo': 4,
  'pecador': -2,
  'inocente': 3,
  'culpable': -3,
  'puro': 3,
  'impuro': -2,
  'limpio': 2,
  'sucio': -2,
  'claro': 2,
  'oscuro': -1,
  'brillante': 3,
  'opaco': -1,
  'luminoso': 3,
  'sombrío': -2,
  'radiante': 4,
  'apagado': -2,
  'vivaz': 3,
  'mortecino': -2,
  'vibrante': 3,
  'desvaído': -2,
  'colorido': 2,
  'gris': -1,
  'blanco': 1,
  'negro': -1,
  'dorado': 3,
  'plateado': 2,
  'rico': 2,
  'pobre': -2,
  'abundante': 3,
  'escaso': -2,
  'lleno': 2,
  'vacío': -2,
  'completo': 2,
  'incompleto': -1,
  'entero': 1,
  'roto': -2,
  'perfecto': 4,
  'imperfecto': -1,
  'flawless': 4,
  'defectuoso': -3,
  'ideal': 3,
  'real': 1,
  'fantástico': 4,
  'ordinario': -1,
  'extraordinario': 4,
  'común': 0,
  'raro': -1,
  'único': 3,
  'múltiple': 0,
  'singular': 2,
  'plural': 0,
  'individual': 1,
  'colectivo': 1,
  'personal': 1,
  'impersonal': -1,
  'íntimo': 2,
  'público': 0,
  'privado': 1,
  'abierto': 2,
  'cerrado': -1,
  'accesible': 2,
  'inaccesible': -2,
  'disponible': 2,
  'indisponible': -2,
  'presente': 1,
  'ausente': -1,
  'aquí': 1,
  'allí': 0,
  'cerca': 1,
  'lejos': -1,
  'próximo': 1,
  'distante': -1,
  'junto': 2,
  'separado': -1,
  'unido': 3,
  'dividido': -2,
  'conectado': 2,
  'desconectado': -2,
  'relacionado': 1,
  'aislado': -2,
  'incluido': 2,
  'excluido': -3,
  'dentro': 1,
  'fuera': -1,
  'interior': 1,
  'exterior': 0,
  'interno': 1,
  'externo': 0,
  'profundo': 2,
  'superficial': -1,
  'alto': 1,
  'bajo': -1,
  'grande': 1,
  'pequeño': -1,
  'enorme': 2,
  'diminuto': -1,
  'gigante': 2,
  'minúsculo': -1,
  'inmenso': 2,
  'microscópico': -1,
  'vasto': 2,
  'estrecho': -1,
  'amplio': 2,
  'limitado': -1,
  'extenso': 1,
  'reducido': -1,
  'expandido': 2,
  'contraído': -1,
  'crecido': 2,
  'encogido': -1,
  'aumentado': 2,
  'disminuido': -2,
  'incrementado': 2,
  'decrementado': -2,
  'subido': 1,
  'bajado': -1,
  'elevado': 2,
  'hundido': -2,
  'levantado': 2,
  'caído': -2,
  'erguido': 2,
  'derribado': -2,
  'construido': 2,
  'destruido': -3,
  'edificado': 2,
  'demolido': -3,
  'creado': 3,
  'aniquilado': -4,
  'formado': 2,
  'deformado': -2,
  'moldeado': 1,
  'destrozado': -3,
  'reparado': 3,
  'dañado': -3,
  'arreglado': 3,
  'estropeado': -3,
  'compuesto': 2,
  'descompuesto': -2,
  'organizado': 2,
  'desorganizado': -2,
  'ordenado': 2,
  'desordenado': -2,
  'estructurado': 2,
  'desestructurado': -2,
  'planificado': 2,
  'improvisado': 0,
  'preparado': 2,
  'desprevenido': -2,
  'listo': 2,
  'no listo': -2,
  'dispuesto': 2,
  'reacio': -2,
  'decidido': 2,
  'indeciso': -2,
  'determinado': 3,
  'vacilante': -2,
  'resuelto': 3,
  'irresoluto': -2,
  'firme': 2,
  'débil': -2,
  'sólido': 2,
  'frágil': -2,
  'resistente': 2,
  'vulnerable': -2,
  'invulnerable': 3,
  'protegido': 2,
  'desprotegido': -3,
  'seguro': 2,
  'peligroso': -3,
  'a salvo': 3,
  'en riesgo': -3,
  'amenazado': -3,
  'tranquilo': 2,
  'agitado': -2,
  'calmado': 2,
  'alterado': -2,
  'sereno': 3,
  'turbulento': -2,
  'pacífico': 3,
  'violento': -4,
  'gentil': 3,
  'agresivo': -3,
  'suave': 2,
  'áspero': -2,
  'delicado': 2,
  'tosco': -2,
  'refinado': 2,
  'vulgar': -3,
  'elegante': 3,
  'grosero': -3,
  'educado': 2,
  'maleducado': -3,
  'cortés': 3,
  'descortés': -3,
  'amable': 4,
  'desagradable': -3,
  'simpático': 3,
  'antipático': -3,
  'agradable': 3,
  'molesto': -2,
  'placentero': 3,
  'desagradable': -3,
  'satisfactorio': 3,
  'insatisfactorio': -3,
  'gratificante': 4,
  'frustrante': -3,
  'recompensante': 4,
  'decepcionante': -3,
  'alentador': 3,
  'desalentador': -3,
  'esperanzador': 4,
  'desesperanzador': -4,
  'prometedor': 3,
  'desalentador': -3,
  'optimista': 4,
  'pesimista': -3,
  'positivo': 3,
  'negativo': -3,
  'constructivo': 3,
  'destructivo': -4,
  'productivo': 3,
  'improductivo': -2,
  'eficiente': 3,
  'ineficiente': -2,
  'efectivo': 3,
  'inefectivo': -2,
  'útil': 3,
  'inútil': -3,
  'valioso': 4,
  'sin valor': -3,
  'importante': 3,
  'insignificante': -2,
  'relevante': 2,
  'irrelevante': -2,
  'significativo': 3,
  'insignificante': -2,
  'trascendente': 3,
  'trivial': -1,
  'profundo': 3,
  'superficial': -1,
  'sustancial': 2,
  'insustancial': -1,
  'sólido': 2,
  'hueco': -1,
  'consistente': 2,
  'inconsistente': -2,
  'coherente': 2,
  'incoherente': -2,
  'lógico': 2,
  'ilógico': -2,
  'racional': 2,
  'irracional': -2,
  'razonable': 2,
  'irrazonable': -2,
  'sensato': 2,
  'insensato': -2,
  'cuerdo': 2,
  'loco': -3,
  'sano': 3,
  'enfermo': -3,
  'saludable': 4,
  'insalubre': -3,
  'robusto': 3,
  'débil': -2,
  'vigoroso': 3,
  'lánguido': -2,
  'enérgico': 4,
  'apático': -3,
  'dinámico': 3,
  'estático': -1,
  'activo': 3,
  'pasivo': -1,
  'móvil': 1,
  'inmóvil': -1,
  'ágil': 3,
  'torpe': -2,
  'rápido': 2,
  'lento': -1,
  'veloz': 3,
  'pausado': 0,
  'acelerado': 1,
  'retrasado': -2,
  'puntual': 2,
  'impuntual': -2,
  'temprano': 1,
  'tardío': -1,
  'oportuno': 3,
  'inoportuno': -2,
  'conveniente': 2,
  'inconveniente': -2,
  'adecuado': 2,
  'inadecuado': -2,
  'apropiado': 2,
  'inapropiado': -2,
  'correcto': 3,
  'incorrecto': -2,
  'exacto': 2,
  'inexacto': -2,
  'preciso': 2,
  'impreciso': -2,
  'específico': 1,
  'vago': -1,
  'claro': 3,
  'confuso': -2,
  'evidente': 2,
  'oculto': -1,
  'obvio': 1,
  'sutil': 1,
  'manifiesto': 2,
  'latente': 0,
  'visible': 1,
  'invisible': -1,
  'aparente': 1,
  'oculto': -1,
  'revelado': 2,
  'escondido': -1,
  'descubierto': 2,
  'perdido': -2,
  'encontrado': 3,
  'hallado': 3,
  'buscado': 0,
  'perseguido': -1,
  'cazado': -2,
  'capturado': -2,
  'liberado': 4,
  'escapado': 2,
  'huido': -1,
  'refugiado': 1,
  'exiliado': -2,
  'desterrado': -3,
  'bienvenido': 4,
  'rechazado': -4,
  'aceptado': 4,
  'negado': -3,
  'aprobado': 4,
  'desaprobado': -3,
  'permitido': 2,
  'prohibido': -2,
  'autorizado': 2,
  'no autorizado': -2,
  'legal': 1,
  'ilegal': -3,
  'legítimo': 2,
  'ilegítimo': -2,
  'válido': 2,
  'inválido': -2,
  'oficial': 1,
  'no oficial': -1,
  'formal': 1,
  'informal': 0,
  'serio': 1,
  'divertido': 3,
  'gracioso': 4,
  'aburrido': -3,
  'entretenido': 3,
  'tedioso': -3,
  'interesante': 3,
  'monótono': -2,
  'variado': 2,
  'repetitivo': -2,
  'diverso': 2,
  'uniforme': 0,
  'diferente': 1,
  'igual': 0,
  'distinto': 1,
  'similar': 0,
  'parecido': 0,
  'idéntico': 0,
  'original': 3,
  'copiado': -1,
  'auténtico': 3,
  'falso': -3,
  'genuino': 3,
  'artificial': -1,
  'real': 2,
  'ficticio': -1,
  'verdadero': 3,
  'mentiroso': -4,
  'honesto': 4,
  'deshonesto': -4,
  'sincero': 4,
  'falso': -3,
  'franco': 3,
  'hipócrita': -4,
  'directo': 2,
  'indirecto': -1,
  'abierto': 3,
  'cerrado': -1,
  'transparente': 3,
  'opaco': -1,
  'claro': 3,
  'turbio': -2,
  'puro': 4,
  'contaminado': -3,
  'limpio': 3,
  'sucio': -3,
  'inmaculado': 4,
  'manchado': -2,
  'perfecto': 4,
  'imperfecto': -1,
  'completo': 3,
  'incompleto': -1,
  'entero': 2,
  'fragmentado': -2,
  'íntegro': 3,
  'corrupto': -4,
  'moral': 3,
  'inmoral': -4,
  'ético': 3,
  'no ético': -4,
  'justo': 4,
  'injusto': -4,
  'equitativo': 3,
  'inequitativo': -3,
  'imparcial': 3,
  'parcial': -2,
  'objetivo': 2,
  'subjetivo': 0,
  'neutral': 0,
  'sesgado': -2,
  'equilibrado': 3,
  'desequilibrado': -2,
  'estable': 2,
  'inestable': -2,
  'constante': 2,
  'variable': 0,
  'fijo': 1,
  'cambiante': 0,
  'permanente': 1,
  'temporal': 0,
  'eterno': 2,
  'efímero': -1,
  'duradero': 2,
  'pasajero': -1,
  'persistente': 2,
  'fugaz': -1,
  'continuo': 1,
  'intermitente': -1,
  'regular': 1,
  'irregular': -1,
  'sistemático': 2,
  'caótico': -3,
  'metódico': 2,
  'desordenado': -2,
  'disciplinado': 3,
  'indisciplinado': -2,
  'controlado': 2,
  'descontrolado': -3,
  'dominado': -1,
  'libre': 4,
  'sometido': -3,
  'independiente': 3,
  'dependiente': -1,
  'autónomo': 3,
  'subordinado': -1,
  'soberano': 3,
  'vasallo': -2,
  'poderoso': 3,
  'impotente': -3,
  'fuerte': 3,
  'débil': -2,
  'robusto': 3,
  'frágil': -2,
  'resistente': 3,
  'vulnerable': -2,
  'invencible': 4,
  'derrotado': -3,
  'victorioso': 4,
  'perdedor': -3,
  'ganador': 4,
  'triunfante': 4,
  'fracasado': -4,
  'exitoso': 4,
  'fallido': -3,
  'logrado': 4,
  'frustrado': -3,
  'conseguido': 3,
  'perdido': -2,
  'obtenido': 3,
  'desperdiciado': -3,
  'aprovechado': 3,
  'malgastado': -3,
  'utilizado': 2,
  'desaprovechado': -2,
  'empleado': 1,
  'desempleado': -2,
  'ocupado': 1,
  'desocupado': -1,
  'activo': 3,
  'inactivo': -2,
  'productivo': 3,
  'improductivo': -2,
  'eficaz': 3,
  'ineficaz': -2,
  'competente': 3,
  'incompetente': -3,
  'capaz': 3,
  'incapaz': -3,
  'hábil': 3,
  'inhábil': -2,
  'diestro': 3,
  'torpe': -2,
  'experto': 4,
  'novato': -1,
  'profesional': 3,
  'amateur': -1,
  'maestro': 4,
  'aprendiz': 1,
  'veterano': 3,
  'principiante': 0,
  'experimentado': 3,
  'inexperto': -2,
  'conocedor': 3,
  'ignorante': -3,
  'sabio': 4,
  'necio': -3,
  'inteligente': 4,
  'tonto': -3,
  'brillante': 4,
  'opaco': -1,
  'genial': 4,
  'mediocre': -2,
  'talentoso': 4,
  'sin talento': -3,
  'dotado': 4,
  'limitado': -2,
  'privilegiado': 2,
  'desfavorecido': -3,
  'afortunado': 4,
  'desafortunado': -3,
  'bendecido': 4,
  'maldito': -4,
  'favorecido': 3,
  'desfavorecido': -3,
  'beneficiado': 3,
  'perjudicado': -3,
  'ayudado': 3,
  'obstaculizado': -3,
  'apoyado': 4,
  'abandonado': -4,
  'respaldado': 3,
  'traicionado': -4,
  'defendido': 3,
  'atacado': -3,
  'protegido': 3,
  'amenazado': -3,
  'cuidado': 4,
  'descuidado': -3,
  'atendido': 3,
  'ignorado': -3,
  'escuchado': 3,
  'silenciado': -3,
  'comprendido': 4,
  'malentendido': -3,
  'interpretado': 2,
  'malinterpretado': -2,
  'valorado': 4,
  'despreciado': -4,
  'apreciado': 4,
  'subestimado': -3,
  'reconocido': 4,
  'desconocido': -2,
  'famoso': 3,
  'anónimo': -1,
  'célebre': 4,
  'ignorado': -3,
  'popular': 3,
  'impopular': -3,
  'querido': 4,
  'odiado': -4,
  'amado': 4,
  'despreciado': -4,
  'adorado': 4,
  'aborrecido': -4,
  'venerado': 4,
  'detestado': -4,
  'respetado': 4,
  'irrespetado': -3,
  'admirado': 4,
  'despreciado': -4,
  'elogiado': 4,
  'criticado': -2,
  'alabado': 4,
  'censurado': -3,
  'felicitado': 4,
  'reprendido': -3,
  'premiado': 4,
  'castigado': -3,
  'recompensado': 4,
  'penalizado': -3,
  'honrado': 4,
  'deshonrado': -4,
  'distinguido': 4,
  'humillado': -4,
  'elevado': 3,
  'rebajado': -3,
  'promovido': 3,
  'degradado': -3,
  'ascendido': 3,
  'descendido': -2,
  'subido': 2,
  'bajado': -2,
  'mejorado': 4,
  'empeorado': -3,
  'progresado': 3,
  'retrocedido': -3,
  'avanzado': 3,
  'retrasado': -2,
  'desarrollado': 3,
  'atrasado': -2,
  'evolucionado': 3,
  'involucionado': -3,
  'crecido': 3,
  'encogido': -2,
  'expandido': 3,
  'contraído': -2,
  'aumentado': 2,
  'disminuido': -2,
  'incrementado': 2,
  'reducido': -1,
  'multiplicado': 2,
  'dividido': -1,
  'sumado': 2,
  'restado': -1,
  'agregado': 2,
  'quitado': -2,
  'añadido': 2,
  'eliminado': -2,
  'incluido': 3,
  'excluido': -3,
  'incorporado': 2,
  'separado': -2,
  'integrado': 3,
  'desintegrado': -3,
  'unido': 4,
  'dividido': -2,
  'conectado': 3,
  'desconectado': -2,
  'enlazado': 2,
  'desenlazado': -2,
  'vinculado': 2,
  'desvinculado': -2,
  'relacionado': 2,
  'aislado': -3,
  'asociado': 2,
  'disociado': -2,
  'aliado': 3,
  'enemigo': -4,
  'compañero': 3,
  'rival': -2,
  'socio': 2,
  'competidor': -1,
  'colaborador': 3,
  'oponente': -2,
  'cooperador': 3,
  'adversario': -3,
  'partidario': 3,
  'detractor': -3,
  'seguidor': 2,
  'líder': 3,
  'discípulo': 2,
  'maestro': 4,
  'estudiante': 2,
  'profesor': 3,
  'alumno': 2,
  'mentor': 4,
  'guía': 3,
  'consejero': 3,
  'asesor': 2,
  'consultor': 2,
  'experto': 4,
  'especialista': 3,
  'profesional': 3,
  'técnico': 2,
  'artesano': 3,
  'artista': 4,
  'creador': 4,
  'inventor': 4,
  'innovador': 4,
  'pionero': 4,
  'explorador': 3,
  'descubridor': 4,
  'investigador': 3,
  'científico': 3,
  'estudioso': 3,
  'erudito': 4,
  'intelectual': 3,
  'pensador': 3,
  'filósofo': 3,
  'sabio': 4,
  'genio': 4,
  'prodigio': 4,
  'talento': 4,
  'don': 4,
  'regalo': 3,
  'bendición': 4,
  'gracia': 4,
  'favor': 3,
  'privilegio': 2,
  'derecho': 2,
  'libertad': 4,
  'independencia': 4,
  'autonomía': 3,
  'soberanía': 3,
  'autoridad': 2,
  'poder': 2,
  'fuerza': 2,
  'energía': 3,
  'vitalidad': 4,
  'vigor': 3,
  'dinamismo': 3,
  'actividad': 2,
  'movimiento': 1,
  'acción': 2,
  'reacción': 1,
  'respuesta': 2,
  'contestación': 1,
  'réplica': 1,
  'eco': 1,
  'resonancia': 2,
  'vibración': 2,
  'pulsación': 1,
  'latido': 2,
  'ritmo': 2,
  'compás': 1,
  'melodía': 3,
  'armonía': 4,
  'sinfonía': 4,
  'concierto': 3,
  'música': 4,
  'canción': 3,
  'himno': 3,
  'balada': 2,
  'serenata': 3,
  'lamento': -2,
  'llanto': -3,
  'sollozo': -3,
  'gemido': -3,
  'quejido': -3,
  'suspiro': -1,
  'respiración': 1,
  'aliento': 2,
  'soplo': 1,
  'brisa': 2,
  'viento': 1,
  'huracán': -2,
  'tormenta': -3,
  'tempestad': -3,
  'calma': 3,
  'serenidad': 4,
  'tranquilidad': 4,
  'quietud': 2,
  'silencio': 2,
  'paz': 4,
  'armonía': 4,
  'concordia': 4,
  'unión': 4,
  'fraternidad': 4,
  'hermandad': 4,
  'solidaridad': 4,
  'compañerismo': 4,
  'camaradería': 3,
  'amistad': 4,
  'amor': 4,
  'cariño': 4,
  'afecto': 4,
  'ternura': 4,
  'dulzura': 4,
  'suavidad': 3,
  'delicadeza': 3,
  'finura': 2,
  'elegancia': 3,
  'gracia': 4,
  'belleza': 4,
  'hermosura': 4,
  'lindura': 3,
  'atractivo': 3,
  'encanto': 4,
  'fascinación': 4,
  'seducción': 2,
  'magnetismo': 3,
  'carisma': 4,
  'personalidad': 2,
  'carácter': 2,
  'temperamento': 1,
  'humor': 3,
  'ánimo': 2,
  'espíritu': 3,
  'alma': 3,
  'corazón': 4,
  'mente': 2,
  'cerebro': 2,
  'inteligencia': 4,
  'sabiduría': 4,
  'conocimiento': 3,
  'saber': 3,
  'ciencia': 3,
  'arte': 4,
  'cultura': 3,
  'educación': 3,
  'formación': 2,
  'preparación': 2,
  'entrenamiento': 2,
  'práctica': 2,
  'ejercicio': 2,
  'deporte': 3,
  'juego': 3,
  'diversión': 4,
  'entretenimiento': 3,
  'pasatiempo': 2,
  'hobby': 2,
  'afición': 2,
  'interés': 2,
  'pasión': 4,
  'entusiasmo': 4,
  'fervor': 3,
  'ardor': 3,
  'fuego': 2,
  'llama': 2,
  'luz': 3,
  'brillo': 3,
  'resplandor': 3,
  'fulgor': 3,
  'destello': 2,
  'chispa': 2,
  'centella': 2,
  'rayo': 1,
  'relámpago': 1,
  'trueno': 0,
  'estruendo': -1,
  'ruido': -2,
  'estrépito': -2,
  'alboroto': -2,
  'escándalo': -3,
  'tumulto': -3,
  'caos': -4,
  'desorden': -3,
  'confusión': -3,
  'lío': -2,
  'enredo': -2,
  'complicación': -2,
  'problema': -3,
  'dificultad': -3,
  'obstáculo': -3,
  'impedimento': -3,
  'barrera': -2,
  'muro': -1,
  'pared': 0,
  'límite': -1,
  'frontera': 0,
  'borde': 0,
  'margen': 0,
  'orilla': 1,
  'costa': 2,
  'playa': 3,
  'mar': 2,
  'océano': 2,
  'agua': 2,
  'río': 2,
  'lago': 2,
  'fuente': 3,
  'manantial': 3,
  'oasis': 4,
  'paraíso': 4,
  'cielo': 4,
  'gloria': 4,
  'divinidad': 4,
  'dios': 4,
  'ángel': 4,
  'santo': 4,
  'bendición': 4,
  'milagro': 4,
  'maravilla': 4,
  'prodigio': 4,
  'fenómeno': 2,
  'evento': 1,
  'acontecimiento': 1,
  'suceso': 1,
  'hecho': 1,
  'realidad': 2,
  'verdad': 4,
  'certeza': 3,
  'seguridad': 3,
  'confianza': 4,
  'fe': 4,
  'esperanza': 4,
  'ilusión': 3,
  'sueño': 3,
  'deseo': 3,
  'anhelo': 3,
  'aspiración': 3,
  'ambición': 2,
  'meta': 2,
  'objetivo': 2,
  'propósito': 3,
  'finalidad': 2,
  'intención': 2,
  'plan': 2,
  'proyecto': 2,
  'programa': 1,
  'esquema': 1,
  'diseño': 2,
  'patrón': 1,
  'modelo': 2,
  'ejemplo': 2,
  'muestra': 1,
  'prueba': 1,
  'evidencia': 2,
  'demostración': 2,
  'manifestación': 2,
  'expresión': 2,
  'comunicación': 3,
  'mensaje': 2,
  'información': 2,
  'noticia': 1,
  'novedad': 2,
  'sorpresa': 3,
  'asombro': 3,
  'admiración': 4,
  'respeto': 4,
  'veneración': 4,
  'adoración': 4,
  'culto': 2,
  'devoción': 4,
  'lealtad': 4,
  'fidelidad': 4,
  'compromiso': 3,
  'promesa': 3,
  'juramento': 2,
  'voto': 2,
  'palabra': 2,
  'honor': 4,
  'dignidad': 4,
  'nobleza': 4,
  'grandeza': 4,
  'magnificencia': 4,
  'esplendor': 4,
  'gloria': 4,
  'triunfo': 4,
  'victoria': 4,
  'éxito': 4,
  'logro': 4,
  'conquista': 3,
  'hazaña': 4,
  'proeza': 4,
  'gesta': 4,
  'epopeya': 4,
  'leyenda': 3,
  'mito': 2,
  'historia': 2,
  'relato': 2,
  'cuento': 2,
  'fábula': 2,
  'narración': 2,
  'descripción': 1,
  'explicación': 2,
  'aclaración': 2,
  'interpretación': 2,
  'comprensión': 4,
  'entendimiento': 3,
  'conocimiento': 3,
  'sabiduría': 4,
  'prudencia': 3,
  'sensatez': 3,
  'cordura': 3,
  'razón': 3,
  'lógica': 2,
  'sentido': 2,
  'significado': 2,
  'importancia': 3,
  'relevancia': 2,
  'trascendencia': 3,
  'valor': 4,
  'mérito': 3,
  'calidad': 3,
  'excelencia': 4,
  'perfección': 4,
  'ideal': 4,
  'modelo': 3,
  'patrón': 2,
  'estándar': 2,
  'norma': 1,
  'regla': 1,
  'ley': 1,
  'principio': 2,
  'fundamento': 2,
  'base': 2,
  'cimiento': 2,
  'raíz': 2,
  'origen': 2,
  'fuente': 3,
  'manantial': 3,
  'nacimiento': 4,
  'comienzo': 2,
  'inicio': 2,
  'principio': 2,
  'arranque': 2,
  'partida': 1,
  'salida': 1,
  'marcha': 1,
  'viaje': 2,
  'travesía': 2,
  'expedición': 2,
  'aventura': 4,
  'exploración': 3,
  'descubrimiento': 4,
  'hallazgo': 4,
  'encuentro': 3,
  'reunión': 3,
  'cita': 2,
  'compromiso': 2,
  'obligación': 1,
  'deber': 2,
  'responsabilidad': 3,
  'cargo': 1,
  'función': 2,
  'papel': 2,
  'rol': 2,
  'posición': 1,
  'lugar': 1,
  'sitio': 1,
  'espacio': 1,
  'área': 1,
  'zona': 1,
  'región': 1,
  'territorio': 1,
  'dominio': 2,
  'reino': 2,
  'imperio': 2,
  'nación': 2,
  'país': 2,
  'patria': 3,
  'hogar': 4,
  'casa': 3,
  'familia': 4,
  'parientes': 2,
  'hermanos': 3,
  'padres': 4,
  'hijos': 4,
  'nietos': 3,
  'abuelos': 3,
  'antepasados': 2,
  'descendientes': 2,
  'generación': 2,
  'linaje': 2,
  'estirpe': 2,
  'raza': 1,
  'especie': 1,
  'tipo': 1,
  'clase': 1,
  'categoría': 1,
  'grupo': 2,
  'conjunto': 2,
  'colección': 2,
  'serie': 1,
  'secuencia': 1,
  'orden': 2,
  'organización': 3,
  'estructura': 2,
  'sistema': 2,
  'método': 2,
  'procedimiento': 2,
  'proceso': 2,
  'desarrollo': 3,
  'evolución': 3,
  'progreso': 4,
  'avance': 3,
  'mejora': 4,
  'perfeccionamiento': 4,
  'refinamiento': 3,
  'pulimiento': 2,
  'acabado': 2,
  'terminación': 2,
  'conclusión': 2,
  'final': 1,
  'fin': 1,
  'término': 1,
  'límite': 0,
  'frontera': 0,
  'barrera': -1,
  'obstáculo': -2,
  'impedimento': -2,
  'dificultad': -2,
  'problema': -2,
  'inconveniente': -2,
  'molestia': -2,
  'fastidio': -3,
  'irritación': -3,
  'enojo': -3,
  'ira': -4,
  'cólera': -4,
  'furia': -4,
  'rabia': -4,
  'odio': -4,
  'rencor': -4,
  'resentimiento': -4,
  'amargura': -4,
  'dolor': -4,
  'sufrimiento': -4,
  'pena': -3,
  'tristeza': -4,
  'melancolía': -3,
  'nostalgia': -2,
  'añoranza': -2,
  'soledad': -3,
  'abandono': -4,
  'desamparo': -4,
  'desolación': -4,
  'vacío': -3,
  'nada': -2,
  'ausencia': -2,
  'falta': -2,
  'carencia': -3,
  'escasez': -3,
  'pobreza': -3,
  'miseria': -4,
  'indigencia': -4,
  'necesidad': -2,
  'hambre': -3,
  'sed': -2,
  'frío': -2,
  'calor': -1,
  'temperatura': 0,
  'clima': 1,
  'tiempo': 1,
  'época': 1,
  'era': 1,
  'período': 1,
  'momento': 1,
  'instante': 1,
  'segundo': 0,
  'minuto': 0,
  'hora': 0,
  'día': 1,
  'semana': 1,
  'mes': 1,
  'año': 1,
  'década': 1,
  'siglo': 1,
  'milenio': 1,
  'eternidad': 2,
  'infinito': 2,
  'ilimitado': 2,
  'inmenso': 3,
  'enorme': 2,
  'gigante': 2,
  'colosal': 3,
  'monumental': 3,
  'grandioso': 4,
  'magnífico': 4,
  'espléndido': 4,
  'maravilloso': 4,
  'fantástico': 4,
  'increíble': 4,
  'asombroso': 4,
  'sorprendente': 3,
  'impresionante': 4,
  'extraordinario': 4,
  'excepcional': 4,
  'especial': 4,
  'único': 4,
  'singular': 3,
  'particular': 2,
  'específico': 2,
  'concreto': 2,
  'preciso': 3,
  'exacto': 3,
  'correcto': 4,
  'acertado': 4,
  'apropiado': 3,
  'adecuado': 3,
  'conveniente': 3,
  'oportuno': 3,
  'favorable': 4,
  'beneficioso': 4,
  'provechoso': 4,
  'útil': 4,
  'valioso': 4,
  'precioso': 4,
  'estimado': 4,
  'querido': 4,
  'amado': 4,
  'adorado': 4,
  'venerado': 4,
  'respetado': 4,
  'admirado': 4,
  'elogiado': 4,
  'alabado': 4,
  'celebrado': 4,
  'festejado': 4,
  'honrado': 4,
  'distinguido': 4,
  'reconocido': 4,
  'famoso': 3,
  'célebre': 4,
  'ilustre': 4,
  'notable': 4,
  'destacado': 4,
  'sobresaliente': 4,
  'excelente': 4,
  'superior': 4,
  'mejor': 4,
  'óptimo': 4,
  'perfecto': 4,
  'ideal': 4,
  'divino': 4,
  'celestial': 4,
  'angelical': 4,
  'santo': 4,
  'sagrado': 4,
  'bendito': 4,
  'bienaventurado': 4,
  'dichoso': 4,
  'afortunado': 4,
  'venturoso': 4,
  'próspero': 4,
  'exitoso': 4,
  'triunfante': 4,
  'victorioso': 4,
  'ganador': 4,
  'campeón': 4,
  'héroe': 4,
  'protagonista': 3,
  'estrella': 4,
  'figura': 3,
  'personalidad': 3,
  'individuo': 2,
  'persona': 2,
  'ser': 2,
  'criatura': 2,
  'ente': 1,
  'existencia': 2,
  'vida': 4,
  'vitalidad': 4,
  'energía': 4,
  'fuerza': 3,
  'poder': 3,
  'potencia': 3,
  'capacidad': 3,
  'habilidad': 4,
  'destreza': 4,
  'talento': 4,
  'don': 4,
  'regalo': 4,
  'obsequio': 3,
  'presente': 3,
  'dádiva': 3,
  'ofrenda': 3,
  'sacrificio': 2,
  'entrega': 4,
  'dedicación': 4,
  'devoción': 4,
  'amor': 4,
  'cariño': 4,
  'afecto': 4,
  'ternura': 4,
  'dulzura': 4,
  'bondad': 4,
  'generosidad': 4,
  'nobleza': 4,
  'grandeza': 4,
  'magnificencia': 4,
  'esplendor': 4,
  'gloria': 4,
  'honor': 4,
  'dignidad': 4,
  'respeto': 4,
  'consideración': 4,
  'atención': 3,
  'cuidado': 4,
  'protección': 4,
  'seguridad': 4,
  'tranquilidad': 4,
  'paz': 4,
  'serenidad': 4,
  'calma': 4,
  'sosiego': 4,
  'quietud': 3,
  'silencio': 3,
  'mutismo': 1,
  'mudez': 0,
  'sordera': -1,
  'ceguera': -2,
  'oscuridad': -2,
  'tinieblas': -3,
  'sombra': -1,
  'penumbra': -1,
  'claridad': 3,
  'luz': 4,
  'brillo': 4,
  'resplandor': 4,
  'fulgor': 4,
  'destello': 3,
  'chispa': 3,
  'centella': 3,
  'rayo': 2,
  'relámpago': 2,
  'trueno': 1,
  'tormenta': -2,
  'tempestad': -3,
  'huracán': -3,
  'ciclón': -3,
  'tornado': -3,
  'vendaval': -2,
  'viento': 1,
  'brisa': 3,
  'aire': 2,
  'atmósfera': 2,
  'ambiente': 2,
  'entorno': 2,
  'medio': 2,
  'contexto': 2,
  'situación': 1,
  'circunstancia': 1,
  'condición': 1,
  'estado': 1,
  'posición': 1,
  'lugar': 2,
  'sitio': 2,
  'espacio': 2,
  'área': 2,
  'zona': 2,
  'región': 2,
  'territorio': 2,
  'dominio': 2
};

// Agregar palabras personalizadas al analizador
sentiment.registerLanguage('es', spanishWords);

/**
 * Analiza el sentimiento de un texto
 * @param {string} text - Texto a analizar
 * @returns {Object} Resultado del análisis de sentimientos
 */
function analyzeSentiment(text) {
  try {
    if (!text || typeof text !== 'string') {
      return {
        sentiment: 'neutral',
        score: 0,
        comparative: 0,
        words: [],
        positive: [],
        negative: []
      };
    }

    // Limpiar y preparar el texto
    const cleanText = text.toLowerCase().trim();
    
    // Usar compromise para mejorar el análisis en español
    const doc = nlp(cleanText);
    const processedText = doc.text();

    // Analizar sentimiento
    const result = sentiment.analyze(processedText, { language: 'es' });
    
    // Determinar categoría de sentimiento
    let sentimentCategory;
    if (result.comparative > 0.1) {
      sentimentCategory = 'positive';
    } else if (result.comparative < -0.1) {
      sentimentCategory = 'negative';
    } else {
      sentimentCategory = 'neutral';
    }

    return {
      sentiment: sentimentCategory,
      score: result.score,
      comparative: result.comparative,
      words: result.words,
      positive: result.positive,
      negative: result.negative,
      calculation: result.calculation
    };

  } catch (error) {
    console.error('Error analyzing sentiment:', error);
    return {
      sentiment: 'neutral',
      score: 0,
      comparative: 0,
      words: [],
      positive: [],
      negative: [],
      error: error.message
    };
  }
}

/**
 * Obtiene una descripción legible del sentimiento
 * @param {string} sentiment - Categoría del sentimiento
 * @param {number} score - Puntuación del sentimiento
 * @returns {string} Descripción del sentimiento
 */
function getSentimentDescription(sentiment, score) {
  const descriptions = {
    positive: {
      high: 'Muy positivo',
      medium: 'Positivo',
      low: 'Ligeramente positivo'
    },
    negative: {
      high: 'Muy negativo',
      medium: 'Negativo', 
      low: 'Ligeramente negativo'
    },
    neutral: 'Neutral'
  };

  if (sentiment === 'neutral') {
    return descriptions.neutral;
  }

  const absScore = Math.abs(score);
  let intensity;
  
  if (absScore >= 3) {
    intensity = 'high';
  } else if (absScore >= 1) {
    intensity = 'medium';
  } else {
    intensity = 'low';
  }

  return descriptions[sentiment][intensity];
}

/**
 * Analiza múltiples textos y devuelve estadísticas
 * @param {Array} texts - Array de textos a analizar
 * @returns {Object} Estadísticas de sentimientos
 */
function analyzeBatchSentiments(texts) {
  if (!Array.isArray(texts) || texts.length === 0) {
    return {
      total: 0,
      positive: 0,
      negative: 0,
      neutral: 0,
      averageScore: 0,
      results: []
    };
  }

  const results = texts.map(text => analyzeSentiment(text));
  
  const stats = {
    total: results.length,
    positive: results.filter(r => r.sentiment === 'positive').length,
    negative: results.filter(r => r.sentiment === 'negative').length,
    neutral: results.filter(r => r.sentiment === 'neutral').length,
    averageScore: results.reduce((sum, r) => sum + r.score, 0) / results.length,
    results: results
  };

  return stats;
}

module.exports = {
  analyzeSentiment,
  getSentimentDescription,
  analyzeBatchSentiments
};